(function(){"use strict";var e={165:function(e,t,o){var n=o(9242),l=o(3396);const a={id:"app"};function r(e,t,o,n,r,i){const s=(0,l.up)("Home");return(0,l.wg)(),(0,l.iD)("div",a,[(0,l.Wm)(s)])}var i=o(7139);const s=e=>((0,l.dD)("data-v-3fbbb1fa"),e=e(),(0,l.Cn)(),e),c={class:"container"},d=s((()=>(0,l._)("h1",null,"Weclapp Time Track",-1))),u=s((()=>(0,l._)("label",{for:"apiKeyInput"},"API Key:",-1))),p=s((()=>(0,l._)("label",{for:"domainInput"},"Domain:",-1))),f=s((()=>(0,l._)("label",{for:"salesOrderSelect"},"Select a Sales Order:",-1))),m=["value"],h=s((()=>(0,l._)("label",{for:"orderItemSelect"},"Select an Order Item:",-1))),v=["value"],b=s((()=>(0,l._)("label",{for:"taskSelect"},"Select a Task:",-1))),w=["value"],g=s((()=>(0,l._)("label",{for:"userSelect"},"Select a User:",-1))),y=["value"],_={class:"file-input"},k=s((()=>(0,l._)("label",{for:"file"},"Upload File",-1))),D=s((()=>(0,l._)("h2",null,"Data:",-1))),S=s((()=>(0,l._)("thead",null,[(0,l._)("tr",null,[(0,l._)("th",null,"billable"),(0,l._)("th",null,"billableDuration"),(0,l._)("th",null,"description"),(0,l._)("th",null,"duration"),(0,l._)("th",null,"startDate")])],-1)));function O(e,t,o,a,r,s){return(0,l.wg)(),(0,l.iD)("div",c,[d,(0,l._)("button",{onClick:t[0]||(t[0]=(...e)=>a.fetchData&&a.fetchData(...e))},"Fetch Data"),(0,l._)("div",null,[u,(0,l.wy)((0,l._)("input",{id:"apiKeyInput",type:"text","onUpdate:modelValue":t[1]||(t[1]=e=>a.apiKey=e),class:"api-input"},null,512),[[n.nr,a.apiKey]])]),(0,l._)("div",null,[p,(0,l.wy)((0,l._)("input",{id:"domainInput",type:"text","onUpdate:modelValue":t[2]||(t[2]=e=>a.domain=e),class:"domain-input"},null,512),[[n.nr,a.domain]])]),(0,l._)("div",null,[f,(0,l.wy)((0,l._)("select",{id:"salesOrderSelect","onUpdate:modelValue":t[3]||(t[3]=e=>a.selectedOrder=e),onChange:t[4]||(t[4]=e=>a.fetchSelectedSalesOrder(e.target.value))},[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(a.salesOrders,(e=>((0,l.wg)(),(0,l.iD)("option",{key:e.id,value:e.id},(0,i.zw)(e.commission)+" (ID: "+(0,i.zw)(e.id)+")",9,m)))),128))],544),[[n.bM,a.selectedOrder]])]),(0,l._)("div",null,[h,(0,l.wy)((0,l._)("select",{id:"orderItemSelect","onUpdate:modelValue":t[5]||(t[5]=e=>a.selectedOrderItem=e)},[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(a.orderItems,(e=>((0,l.wg)(),(0,l.iD)("option",{key:e.id,value:e.id},(0,i.zw)(e.title)+" (ID: "+(0,i.zw)(e.id)+")",9,v)))),128))],512),[[n.bM,a.selectedOrderItem]])]),(0,l._)("div",null,[b,(0,l.wy)((0,l._)("select",{id:"taskSelect","onUpdate:modelValue":t[6]||(t[6]=e=>a.selectedTask=e)},[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(a.currentTasks,(e=>((0,l.wg)(),(0,l.iD)("option",{key:e,value:e},(0,i.zw)(e),9,w)))),128))],512),[[n.bM,a.selectedTask]])]),(0,l._)("div",null,[g,(0,l.wy)((0,l._)("select",{id:"userSelect","onUpdate:modelValue":t[7]||(t[7]=e=>a.selectedUser=e)},[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(a.users,(e=>((0,l.wg)(),(0,l.iD)("option",{key:e.id,value:e.id},(0,i.zw)(e.firstName)+" "+(0,i.zw)(e.lastName)+" ("+(0,i.zw)(e.email)+")",9,y)))),128))],512),[[n.bM,a.selectedUser]])]),(0,l._)("div",_,[(0,l._)("input",{type:"file",id:"file",onChange:t[8]||(t[8]=(...e)=>a.handleFileUpload&&a.handleFileUpload(...e)),accept:".xlsx,.xls,.csv"},null,32),k]),(0,l._)("div",null,[(0,l._)("button",{onClick:t[9]||(t[9]=(...e)=>a.readData&&a.readData(...e))},"Read Data")]),(0,l._)("div",null,[(0,l._)("button",{onClick:t[10]||(t[10]=(...e)=>a.postAllTimeRecords&&a.postAllTimeRecords(...e))},"Post Time Record")]),(0,l._)("div",null,[D,(0,l._)("table",null,[S,(0,l._)("tbody",null,[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(a.data,((e,t)=>((0,l.wg)(),(0,l.iD)("tr",{key:t},[(0,l._)("td",null,(0,i.zw)(e.billable),1),(0,l._)("td",null,(0,i.zw)(e.billableDuration),1),(0,l._)("td",null,(0,i.zw)(e.description),1),(0,l._)("td",null,(0,i.zw)(e.duration),1),(0,l._)("td",null,(0,i.zw)(e.startDate),1)])))),128))])])])])}var T=o(4870),j=o(7092),I=o(1076),H={methods:{async post(e,t){try{const o=await I.Z.post(e,t);return o.data}catch(o){console.error("Error with post method:",o)}},handleFileUpload(e){const t=document.getElementById("file-name"),o=e.target.files;o.length>0?t.textContent=o[0].name:t.textContent="No file chosen..."}},setup(){const e=(0,T.iH)(null),t=(0,T.iH)([]),o=(0,T.iH)([]),n=(0,T.iH)(null),a=(0,T.iH)([]),r=(0,T.iH)(null),i=(0,T.iH)([]),s=(0,T.iH)([]),c=(0,T.iH)(null),d=(0,T.iH)([]),u=(0,T.iH)(null),p=(0,T.iH)(""),f=(0,T.iH)(localStorage.getItem("apiKey")||""),m=(0,T.iH)(localStorage.getItem("domain")||""),h=t=>{e.value=t.target.files[0]},v=e=>new Date(Math.round(86400*(e-25569)*1e3)),b=e=>{if("number"===typeof e)return v(e).getTime()/1e3;const[t,o,n]=e.split("."),[l,a]=n.split(" "),r=`${l}-${o.padStart(2,"0")}-${t.padStart(2,"0")} ${a}`;return new Date(r).getTime()/1e3},w=()=>{if(!e.value)return void(p.value="Keine Datei ausgewÃ¤hlt.");const o=new FileReader;o.onload=e=>{const o=e.target.result,n=j.ij(o,{type:"array"}),l=n.SheetNames[0],a=n.Sheets[l],r=j.P6.sheet_to_json(a).map((e=>({...e,billableDuration:3600*e.billableDuration,duration:3600*e.duration,startDate:e.startDate?1e3*b(e.startDate):null})));t.value=r},o.readAsArrayBuffer(e.value)},g=async()=>{const e=new Headers;e.append("Accept","application/json"),e.append("AuthenticationToken",f.value);const t={method:"GET",headers:e,redirect:"follow"};try{const e=await fetch("https://bbmjboksjsbyiqe.weclapp.com/webapp/api/v1/salesOrder",t),n=await e.json();if(!e.ok)throw new Error(`HTTP error! status: ${e.status}`);o.value=n.result.map((e=>({id:e.id,commission:e.commission})))}catch(n){console.error("Error fetching sales orders: ",n)}},y=async e=>{if(console.log("fetchSelectedSalesOrder called with: ",e),!e)return;const o=`https://bbmjboksjsbyiqe.weclapp.com/webapp/api/v1/salesOrder/id/${e}`;try{const e=await fetch(o,{method:"GET",headers:{Accept:"application/json",AuthenticationToken:f.value}}),n=await e.json();if(!e.ok)throw new Error(`HTTP error! status: ${e.status}`);a.value=n.orderItems.map((e=>({id:e.id,title:e.title,tasks:e.tasks.map((e=>e.id))}))),console.log("Extracted task ids: ",a.value),t.value=[n]}catch(n){console.error("Error fetching selected sales order: ",n)}},_=async()=>{const e=new Headers;e.append("Accept","application/json"),e.append("Content-Type","application/json"),e.append("AuthenticationToken",f.value),e.append("Cookie","_sid_=19");const t={method:"GET",headers:e,redirect:"follow"};fetch("https://bbmjboksjsbyiqe.weclapp.com/webapp/api/v1/user",t).then((e=>e.text())).then((e=>{const t=JSON.parse(e);d.value=t.result})).then((e=>console.log(e))).catch((e=>console.error(e)))},k=async e=>{const t=new Headers({Accept:"application/json","Content-Type":"application/json",AuthenticationToken:f.value}),o=JSON.stringify({billable:e.billable,billableDurationSeconds:e.billableDuration,description:e.description,durationSeconds:e.duration,startDate:e.startDate,taskId:c.value,userId:u.value}),n={method:"POST",headers:t,body:o,redirect:"follow"};try{const e=await fetch("https://bbmjboksjsbyiqe.weclapp.com/webapp/api/v1/timeRecord",n),t=await e.text();console.log(t)}catch(l){console.error("Error posting time record:",l)}},D=async()=>{for(const e of t.value)await k(e)};t.value.forEach((e=>{k(e)}));const S=()=>{g(),_()};return(0,l.YP)(u,(e=>{if(e){const t=d.value.find((t=>t.id===e));console.log(`Selected user ID: ${t.id}, email: ${t.email}`)}})),(0,l.YP)(n,(e=>{if(e){const t=o.value.find((t=>t.id===e));console.log(`Selected order ID: ${t.id}, commission: ${t.commission}`)}console.log("Selected order: ",e)})),(0,l.YP)(r,(e=>{if(e){const t=a.value.find((t=>t.id===e));t&&t.tasks?s.value=t.tasks:s.value=[]}})),(0,l.YP)(c,(e=>{if(e){i.value.find((t=>t.id===e));console.log(`Selected task ID: ${e}`)}})),(0,l.YP)(f,(e=>{localStorage.setItem("apiKey",e)})),(0,l.YP)(m,(e=>{localStorage.setItem("domain",e)})),{file:e,apiKey:f,data:t,salesOrders:o,orderItems:a,tasks:i,currentTasks:s,selectedTask:c,users:d,selectedUser:u,selectedOrder:n,selectedOrderItem:r,domain:m,handleFileUpload:h,readData:w,fetchSalesOrders:g,fetchSelectedSalesOrder:y,fetchData:S,postTimeRecord:k,fetchUsers:_,postAllTimeRecords:D}}},A=o(89);const P=(0,A.Z)(H,[["render",O],["__scopeId","data-v-3fbbb1fa"]]);var U=P,x={name:"App",components:{Home:U}};const z=(0,A.Z)(x,[["render",r]]);var C=z,E=o(5431);(0,E.z)("/service-worker.js",{ready(){console.log("App is being served from cache by a service worker.\nFor more details, visit https://goo.gl/AFskqB")},registered(){console.log("Service worker has been registered.")},cached(){console.log("Content has been cached for offline use.")},updatefound(){console.log("New content is downloading.")},updated(){console.log("New content is available; please refresh.")},offline(){console.log("No internet connection found. App is running in offline mode.")},error(e){console.error("Error during service worker registration:",e)}});const K=(0,n.ri)(C);K.mount("#app")}},t={};function o(n){var l=t[n];if(void 0!==l)return l.exports;var a=t[n]={exports:{}};return e[n].call(a.exports,a,a.exports,o),a.exports}o.m=e,function(){var e=[];o.O=function(t,n,l,a){if(!n){var r=1/0;for(d=0;d<e.length;d++){n=e[d][0],l=e[d][1],a=e[d][2];for(var i=!0,s=0;s<n.length;s++)(!1&a||r>=a)&&Object.keys(o.O).every((function(e){return o.O[e](n[s])}))?n.splice(s--,1):(i=!1,a<r&&(r=a));if(i){e.splice(d--,1);var c=l();void 0!==c&&(t=c)}}return t}a=a||0;for(var d=e.length;d>0&&e[d-1][2]>a;d--)e[d]=e[d-1];e[d]=[n,l,a]}}(),function(){o.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return o.d(t,{a:t}),t}}(),function(){o.d=function(e,t){for(var n in t)o.o(t,n)&&!o.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})}}(),function(){o.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){o.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}(),function(){var e={143:0};o.O.j=function(t){return 0===e[t]};var t=function(t,n){var l,a,r=n[0],i=n[1],s=n[2],c=0;if(r.some((function(t){return 0!==e[t]}))){for(l in i)o.o(i,l)&&(o.m[l]=i[l]);if(s)var d=s(o)}for(t&&t(n);c<r.length;c++)a=r[c],o.o(e,a)&&e[a]&&e[a][0](),e[a]=0;return o.O(d)},n=self["webpackChunkvue_frontend"]=self["webpackChunkvue_frontend"]||[];n.forEach(t.bind(null,0)),n.push=t.bind(null,n.push.bind(n))}();var n=o.O(void 0,[998],(function(){return o(165)}));n=o.O(n)})();
//# sourceMappingURL=app.3270688f.js.map